#!/bin/bash
clear && printf '\e[3J'

echo "Corriendo tests...espere"
echo "|---------------------------------------------------------------------------------------|"
echo "|------------------------  INICIANDO TESTS LEXICO-SINTACTICOS  -------------------------|"
echo " ---------------------------------------------------------------------------------------"
echo "             --------------------------"
echo "            |---TESTS SATISFACTORIOS---|"
echo "             --------------------------"

for file in $(ls tests/lexico-sintacticos/ok); do
  echo "Ejecutando el test "$file""
  ./compiler.out "tests/lexico-sintacticos/ok/"$file
  echo "-------------------------------------------------------"
done

echo "              ------------------------"
echo "             |-----TESTS FALLIDOS-----|"
echo "              ------------------------"

for file in $(ls tests/lexico-sintacticos/fail); do
  echo "Ejecutando el test "$file""
  ./compiler.out "tests/lexico-sintacticos/fail/"$file
  echo "-------------------------------------------------------"
done
echo
echo
echo
echo "|-------------------------------------------------------------------------------|"
echo "|------------------------  INICIANDO TESTS SEMANTICOS  -------------------------|"
echo " -------------------------------------------------------------------------------"
echo "             --------------------------"
echo "            |---TESTS SATISFACTORIOS---|"
echo "             --------------------------"

for file in $(ls tests/semanticos/ok); do
  echo "Ejecutando el test "$file""
  ./compiler.out "tests/semanticos/ok/"$file
  echo "-------------------------------------------------------"
done

echo "              ------------------------"
echo "             |-----TESTS FALLIDOS-----|"
echo "              ------------------------"

for file in $(ls tests/semanticos/fail); do
  echo "Ejecutando el test "$file""
  ./compiler.out "tests/semanticos/fail/"$file
  echo "-------------------------------------------------------"
done


echo "|-------------------------------------------------------------------------------|"
echo "|------------------------  INICIANDO TESTS FINALES  -------------------------|"
echo " -------------------------------------------------------------------------------"

for file in $(ls tests/tests-finales); do
  echo "Ejecutando el test "$file""
  ./compiler.out "tests/tests-finales/"$file
  gcc -o simple assembler.s libaux.c
  ./simple
  echo "-------------------------------------------------------"
done